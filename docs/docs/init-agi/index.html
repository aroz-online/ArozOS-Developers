<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Start Script (init.agi) - Developers | ArozOS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="icon" href="https://aroz-online.github.io/ArozOS-Developers/favicon.png">

  
  
  <link rel="stylesheet" href="/ArozOS-Developers/css/style.min.2abe4f9deee2e3e8ec440009003f7bb21c5c60b7915a1cf8ec38e682289bee57.css">
  

  

</head>

<body class='page page-default-single'>
  <div id="main-menu-mobile" class="main-menu-mobile">
  <ul>
    
    
    <li class="menu-item-home">
      <a href="/ArozOS-Developers/">
        <span>Home</span>
      </a>
    </li>
    
    <li class="menu-item-docs">
      <a href="/ArozOS-Developers/docs/">
        <span>Docs</span>
      </a>
    </li>
    
    <li class="menu-item-source">
      <a href="https://github.com/tobychui/arozos">
        <span>Source</span>
      </a>
    </li>
    
  </ul>
</div>
  <div class="wrapper">
    <div class='header'>
  <div class="container">
    <div class="logo">
      <a href="https://aroz-online.github.io/ArozOS-Developers/"><img width="70" height="70" alt="Logo" src="/images/logo.svg" /></a>
    </div>
    <div class="logo-mobile">
      <a href="https://aroz-online.github.io/ArozOS-Developers/"><img  width="70" height="70" alt="Logo" src="/images/logo-mobile.svg" /></a>
    </div>
    <div id="main-menu" class="main-menu">
  <ul>
    
    
    <li class="menu-item-home">
      <a href="/ArozOS-Developers/">
        <span>Home</span>
      </a>
    </li>
    
    <li class="menu-item-docs">
      <a href="/ArozOS-Developers/docs/">
        <span>Docs</span>
      </a>
    </li>
    
    <li class="menu-item-source">
      <a href="https://github.com/tobychui/arozos">
        <span>Source</span>
      </a>
    </li>
    
  </ul>
</div>
    <button id="toggle-main-menu-mobile" class="hamburger hamburger--slider" type="button">
  <span class="hamburger-box">
    <span class="hamburger-inner"></span>
  </span>
</button>
  </div>
</div>


    
    
    
    
    
    

    
    <div class="container pt-2 pt-md-6 pb-3 pb-md-6">
      <div class="row">
        <div class="col-12 col-md-3 mb-3">
          <div class="sidebar">
            
<div class="docs-menu">
  <h4>Docs</h4>
  <ul>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/runtimes/">Introduction to agi</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/setup_dev_env/">Create New WebApp</a>
    </li>
    
    <li class="active ">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/init-agi/">Start Script (init.agi)</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/agi_resp/">Request &amp; Response</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/frontend_intro/">Front-end Development</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/frontend_window-control/">üîπ Float-Windows API</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/frontend_files/">üîπ File Selector &amp; File Passing</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_intro/">Backend Development</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_std/">üî∏ system</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_user/">üî∏ user</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_serverless/">üî∏ serverless</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_filelib/">üî∏ filelib</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_appdata/">üî∏ appdata</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_imagelib/">üî∏ imagelib</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_http/">üî∏ http</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_websocket/">üî∏ websocket</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_iot/">üî∏ iot</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_share/">üî∏ share</a>
    </li>
    
  </ul>
</div>

          </div>
        </div>
        <div class="col-12 col-md-9">
          
<h1 class="title">Start Script (init.agi)</h1>
<div class="content ">
  <p>The start script (or commonly known as the <code>init.agi</code> file), is the config and environment checking script that allow ArozOS to know the given folder is a WebApp instead of a resources file.  This file define the way and specification on how to launch the WebApp module on the web desktop interface.</p>
<p>Here is a minimal example of the init.agi file.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">	Example Module
</span></span></span><span class="line"><span class="cl"><span class="cm">	author: tobychui
</span></span></span><span class="line"><span class="cl"><span class="cm">	
</span></span></span><span class="line"><span class="cl"><span class="cm">	This module is just an example for showcasing
</span></span></span><span class="line"><span class="cl"><span class="cm">	the basics of how agi scripting works with the
</span></span></span><span class="line"><span class="cl"><span class="cm">	front-end in ArozOS environment
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//Define the launch settings for the module
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">moduleLaunchInfo</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Name</span><span class="o">:</span> <span class="s2">&#34;Example&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Group</span><span class="o">:</span> <span class="s2">&#34;Interface Module&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">IconPath</span><span class="o">:</span> <span class="s2">&#34;Example/img/small_icon.png&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Version</span><span class="o">:</span> <span class="s2">&#34;1.0&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">StartDir</span><span class="o">:</span> <span class="s2">&#34;Example/index.html&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//Register the module
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">registerModule</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">moduleLaunchInfo</span><span class="p">));</span>
</span></span></code></pre></div><p>When the <code>registerModule</code> function is called, it will register the given Example module with ArozOS and all users with permission can access the resources in this module.</p>
<h2 id="module-info-structure">Module Info Structure</h2>
<p>Module info is a JSON object that is required by ArozOS to register your webapp. The object should contains the following fields</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Usage</th>
<th>Optional</th>
</tr>
</thead>
<tbody>
<tr>
<td>Name</td>
<td>Display name of the module</td>
<td></td>
</tr>
<tr>
<td>Desc</td>
<td>Simple description of what the module does</td>
<td>‚úîÔ∏è</td>
</tr>
<tr>
<td>Group</td>
<td>Catergory group of the module</td>
<td></td>
</tr>
<tr>
<td>IconPath</td>
<td>Icon of the module, use in float window title</td>
<td></td>
</tr>
<tr>
<td>Version</td>
<td>Version of the module</td>
<td></td>
</tr>
<tr>
<td>StartDir</td>
<td>Starting path of the module, <strong>must include module root folder name</strong></td>
<td></td>
</tr>
<tr>
<td>SupportFW</td>
<td>If the module support float window mode</td>
<td>‚úîÔ∏è</td>
</tr>
<tr>
<td>LaunchFWDir</td>
<td>Float window launching directory, <strong>must include module root folder name</strong></td>
<td>‚úîÔ∏è</td>
</tr>
<tr>
<td>InitFWSize</td>
<td>Default float window size for this webapp</td>
<td>‚úîÔ∏è</td>
</tr>
<tr>
<td>SupportEmb</td>
<td>If the module support embedded mode</td>
<td>‚úîÔ∏è</td>
</tr>
<tr>
<td>LaunchEmb</td>
<td>Embedded window launching directory, <strong>must include module root folder name</strong></td>
<td>‚úîÔ∏è</td>
</tr>
<tr>
<td>InitEmbSize</td>
<td>Default embedded window size for this webapp</td>
<td>‚úîÔ∏è</td>
</tr>
<tr>
<td>SupportedExt</td>
<td>Formats that this webapp can open</td>
<td>‚úîÔ∏è</td>
</tr>
</tbody>
</table>
<p>Here is another example containing all options usable in the module launch info.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Name</span><span class="o">:</span> <span class="s2">&#34;Music&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Desc</span><span class="o">:</span> <span class="s2">&#34;The best music player in ArOZ Online&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Group</span><span class="o">:</span> <span class="s2">&#34;Media&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="nx">IconPath</span><span class="o">:</span> <span class="s2">&#34;Music/img/module_icon.png&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Version</span><span class="o">:</span> <span class="s2">&#34;0.1.0&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="nx">StartDir</span><span class="o">:</span> <span class="s2">&#34;Music/index.html&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="nx">SupportFW</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="nx">LaunchFWDir</span><span class="o">:</span> <span class="s2">&#34;Music/index.html&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="nx">SupportEmb</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="nx">LaunchEmb</span><span class="o">:</span> <span class="s2">&#34;Music/embedded.html&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="nx">InitFWSize</span><span class="o">:</span> <span class="p">[</span><span class="mi">475</span><span class="p">,</span> <span class="mi">720</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">	<span class="nx">InitEmbSize</span><span class="o">:</span> <span class="p">[</span><span class="mi">360</span><span class="p">,</span> <span class="mi">254</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">	<span class="nx">SupportedExt</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;.mp3&#34;</span><span class="p">,</span><span class="s2">&#34;.flac&#34;</span><span class="p">,</span><span class="s2">&#34;.wav&#34;</span><span class="p">,</span><span class="s2">&#34;.ogg&#34;</span><span class="p">,</span><span class="s2">&#34;.aac&#34;</span><span class="p">,</span><span class="s2">&#34;.webm&#34;</span><span class="p">,</span><span class="s2">&#34;.mp4&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h3 id="default-vs-float-window-vs-embedded-mode">Default vs Float Window vs Embedded Mode</h3>
<p>If a user is trying to open a module in web desktop environment, the float window path will be used to start the module. If the float window path is not set, the default (start dir) will be used as fallback.</p>
<p>The embedded path is only used when a user trying to open a file with the module. In such case, a file info hash will be passed to the starting script location. See <strong>WebApp Front-end Development</strong> section for more information.</p>
<table>
<thead>
<tr>
<th>Mode</th>
<th>Viewport</th>
<th>Module Info Path Definition Key</th>
</tr>
</thead>
<tbody>
<tr>
<td>Default</td>
<td>Viewing as standard website or PWA</td>
<td>StartDir</td>
</tr>
<tr>
<td>Float Window</td>
<td>Viewing as a floating window in web desktop mode</td>
<td>LaunchFWDir</td>
</tr>
<tr>
<td>Embedded Mode</td>
<td>When a file info parameter is passed to the module for opening</td>
<td>LaunchEmb</td>
</tr>
</tbody>
</table>
<p><img src="/screenshots/fw_emb.png" alt=""></p>
<p>From the above screenshot, left: float window | middle: embedded mode | right: default (stand-alone browser window), capture under ArozOS web desktop mode</p>
<hr>
<h4 id="developer-notes">Developer Notes</h4>
<p>Due to the execution scope and security reasons, only function in standard library and appdata library are usable within the start script. No other user functions (e.g. filelib) are usable. Please refer to the library pages for more details.</p>

</div>
</div>

        </div>
      </div>
    </div>
    
  </div>

  <div class="sub-footer">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="sub-footer-inner">
          
            
<div class="social">
    
        <a href="https://github.com/tobychui/arozos" target="blank"><img height="20" width="20" src="/ArozOS-Developers/images/social/github.svg" title="Github" alt="Github" /></a>
    
        <a href="https://t.me/ArOZBeta" target="blank"><img height="20" width="20" src="/ArozOS-Developers/images/social/telegram.svg" title="Telegram" alt="Telegram" /></a>
    
</div>

          
          
            <div class="copyright">CopyRight <a href="https://arozos.com">ArozOS</a> Project | Licensed under GPLv3</div>
          
        </div>
      </div>
    </div>
  </div>
</div>


  

  
  

  
  <script type="text/javascript" src="/ArozOS-Developers/js/scripts.min.302a6fc365d5139fb98cf60bdb8f715d96257ea189161d36c190ccfa8182e569.js"></script>
  

  
  
  
    
  


</body>

</html>
