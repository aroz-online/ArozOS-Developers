<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Create New WebApp - Developers | ArozOS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="icon" href="https://aroz-online.github.io/ArozOS-Developers/favicon.png">

  
  
  <link rel="stylesheet" href="/ArozOS-Developers/css/style.min.2abe4f9deee2e3e8ec440009003f7bb21c5c60b7915a1cf8ec38e682289bee57.css">
  

  

</head>

<body class='page page-default-single'>
  <div id="main-menu-mobile" class="main-menu-mobile">
  <ul>
    
    
    <li class="menu-item-home">
      <a href="/ArozOS-Developers/">
        <span>Home</span>
      </a>
    </li>
    
    <li class="menu-item-docs">
      <a href="/ArozOS-Developers/docs/">
        <span>Docs</span>
      </a>
    </li>
    
    <li class="menu-item-source">
      <a href="https://github.com/tobychui/arozos">
        <span>Source</span>
      </a>
    </li>
    
  </ul>
</div>
  <div class="wrapper">
    <div class='header'>
  <div class="container">
    <div class="logo">
      <a href="https://aroz-online.github.io/ArozOS-Developers/"><img width="70" height="70" alt="Logo" src="/ArozOS-Developers/images/logo.svg" /></a>
    </div>
    <div class="logo-mobile">
      <a href="https://aroz-online.github.io/ArozOS-Developers/"><img  width="70" height="70" alt="Logo" src="/ArozOS-Developers/images/logo-mobile.svg" /></a>
    </div>
    <div id="main-menu" class="main-menu">
  <ul>
    
    
    <li class="menu-item-home">
      <a href="/ArozOS-Developers/">
        <span>Home</span>
      </a>
    </li>
    
    <li class="menu-item-docs">
      <a href="/ArozOS-Developers/docs/">
        <span>Docs</span>
      </a>
    </li>
    
    <li class="menu-item-source">
      <a href="https://github.com/tobychui/arozos">
        <span>Source</span>
      </a>
    </li>
    
  </ul>
</div>
    <button id="toggle-main-menu-mobile" class="hamburger hamburger--slider" type="button">
  <span class="hamburger-box">
    <span class="hamburger-inner"></span>
  </span>
</button>
  </div>
</div>


    
    
    
    
    
    

    
    <div class="container pt-2 pt-md-6 pb-3 pb-md-6">
      <div class="row">
        <div class="col-12 col-md-3 mb-3">
          <div class="sidebar">
            
<div class="docs-menu">
  <h4>Docs</h4>
  <ul>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/runtimes/">Introduction to agi</a>
    </li>
    
    <li class="active ">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/setup_dev_env/">Create New WebApp</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/init-agi/">Start Script (init.agi)</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/agi_resp/">Request &amp; Response</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/frontend_intro/">Front-end Development</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/frontend_window-control/">ğŸ”¹ Float-Windows API</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/frontend_files/">ğŸ”¹ File Selector &amp; File Passing</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_intro/">Backend Development</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_std/">ğŸ”¸ system</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_user/">ğŸ”¸ user</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_serverless/">ğŸ”¸ serverless</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_filelib/">ğŸ”¸ filelib</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_appdata/">ğŸ”¸ appdata</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_imagelib/">ğŸ”¸ imagelib</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_http/">ğŸ”¸ http</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_websocket/">ğŸ”¸ websocket</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_iot/">ğŸ”¸ iot</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_share/">ğŸ”¸ share</a>
    </li>
    
  </ul>
</div>

          </div>
        </div>
        <div class="col-12 col-md-9">
          
<h1 class="title">Create New WebApp</h1>
<div class="content ">
  <h2 id="create-new-webapp-folder-structure">Create New WebApp Folder Structure</h2>
<p>To create a new WebApp, create a folder under the <code>./web/</code> folder under arozos root.  After the folder is created, place the following files into the folder. (Assume the module name is &ldquo;MyWebapp&rdquo;)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">.
</span></span><span class="line"><span class="cl">â””â”€â”€ web/
</span></span><span class="line"><span class="cl">    â””â”€â”€ MyWebapp/
</span></span><span class="line"><span class="cl">        â”œâ”€â”€ init.agi
</span></span><span class="line"><span class="cl">        â”œâ”€â”€ index.html
</span></span><span class="line"><span class="cl">        â””â”€â”€ img/
</span></span><span class="line"><span class="cl">            â”œâ”€â”€ icon.png
</span></span><span class="line"><span class="cl">            â””â”€â”€ desktop_icon.png
</span></span></code></pre></div><p>The icons are required to be in following sizes</p>
<table>
<thead>
<tr>
<th>Icon Filename</th>
<th>Size</th>
</tr>
</thead>
<tbody>
<tr>
<td>icon.png</td>
<td>64 x 64 px</td>
</tr>
<tr>
<td>desktop_icon.png</td>
<td>128 x 128 px</td>
</tr>
</tbody>
</table>
<h2 id="setup-initagi">Setup init.agi</h2>
<p>init.agi is the entry point for ArozOS to know this is a WebApp module folder instead of resources folder. You can edit the init.agi file with text editor like VSCode and set it to JavaScript syntax highlighting.</p>
<p>In the init.agi file, fill in the following minimal fields.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="c1">//Define the launchInfo for the module
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">moduleLaunchInfo</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Name</span><span class="o">:</span> <span class="s2">&#34;Hello World&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Group</span><span class="o">:</span> <span class="s2">&#34;Interface Module&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">IconPath</span><span class="o">:</span> <span class="s2">&#34;MyWebapp/img/small_icon.png&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Version</span><span class="o">:</span> <span class="s2">&#34;1.0&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">StartDir</span><span class="o">:</span> <span class="s2">&#34;MyWebapp/index.html&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//Register the module
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">registerModule</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">moduleLaunchInfo</span><span class="p">));</span>
</span></span></code></pre></div><p>There are a different group settings for different modules. <code>Interface Module</code> is a unique class of modules that is usually reserved for special purposes. However it is used here to make things simplier.</p>
<h3 id="webapp-catergory-groups">WebApp Catergory Groups</h3>
<p>Here are some common groups you can use in your module</p>
<table>
<thead>
<tr>
<th>Group Name</th>
<th>Usage</th>
<th>Reserved</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>Media</td>
<td>Media playback apps</td>
<td>âŒ</td>
<td></td>
</tr>
<tr>
<td>Office</td>
<td>Office or text editing apps</td>
<td>âŒ</td>
<td></td>
</tr>
<tr>
<td>Download</td>
<td>Download tools</td>
<td>âŒ</td>
<td></td>
</tr>
<tr>
<td>Files</td>
<td>File / Storage management apps</td>
<td>âŒ</td>
<td></td>
</tr>
<tr>
<td>Internet</td>
<td>Internet access,Â  configs or proxy apps</td>
<td>âŒ</td>
<td></td>
</tr>
<tr>
<td>Settings</td>
<td>Setting tools provided by 3rd parties</td>
<td>âŒ</td>
<td></td>
</tr>
<tr>
<td>System Tools</td>
<td>System tools that is preinstalled by ArozOS</td>
<td>âœ”ï¸</td>
<td></td>
</tr>
<tr>
<td>Utilities</td>
<td>Some helpful webapps and utilities</td>
<td>âœ”ï¸</td>
<td>Utilities are accessible by all users no matter if they are set to allow access to these category of apps or not</td>
</tr>
<tr>
<td>Interface Module</td>
<td>Interfacing module for custom landing interface</td>
<td>âœ”ï¸</td>
<td>Usually use by system OEM to customize access landing page other than web-desktop interface. E.g. POSÂ  / kiosk machine</td>
</tr>
<tr>
<td>IME</td>
<td>3rd party Input Method Editor</td>
<td>âœ”ï¸</td>
<td>So you can type your home language without installing IME on public computers</td>
</tr>
<tr>
<td>Development</td>
<td>Development related tools</td>
<td>âœ”ï¸</td>
<td>Development &amp; debug tools for ArozOS only, for other development tools, use &ldquo;Office&rdquo; catergory.</td>
</tr>
</tbody>
</table>
<p>Notice the <code>MyWebapp/</code> in the first part of the IconPath and StartDir? It means that you can have a single webapp with different entry points. &ldquo;Management Gateway&rdquo; is one of such examples which utilize this feature to provide &ldquo;System Settings&rdquo; to those who don&rsquo;t like web desktop environment.</p>
<p>After you have added the init.agi, restart ArozOS on your development machine and you will see your new WebApp pops up in the startup menu.</p>
<h2 id="frontend-backend-interaction-via-agi">Frontend Backend Interaction via AGI</h2>
<h3 id="front-end-html--javascript">Front-end HTML / JavaScript</h3>
<p>Lets fill up the index.html with some basic stuffs. Here is an example of a really basic html file.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;apple-mobile-web-app-capable&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;yes&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;viewport&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;UTF-8&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;../script/jquery.min.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;../script/ao_module.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Hello World<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">body</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">background-color</span><span class="p">:</span><span class="kc">white</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span> 
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&#34;test()&#34;</span><span class="p">&gt;</span>Click Me<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="kd">function</span> <span class="nx">test</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">                <span class="nx">ao_module_agirun</span><span class="p">(</span><span class="s2">&#34;MyWebapp/backend/helloworld.js&#34;</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">NAME</span><span class="o">:</span> <span class="s2">&#34;Toby&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">resp</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">alert</span><span class="p">(</span><span class="nx">resp</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span><span class="kd">function</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">alert</span><span class="p">(</span><span class="s2">&#34;Oops. Something went wrong!&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="p">});</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"> <span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</span></span></code></pre></div><p>When the button is clicked, the function test() is called and make a request to the agi script to do some backend work. After the job is done, the agi script will return some value to front-end to popup as &ldquo;alert&rdquo; is called.</p>
<h5 id="notes">Notes</h5>
<ul>
<li>
<p>Before importing ao_module.js (ArozOS system API wrapper), you <strong>must include jquery</strong> as some of the function inside the wrapper require jquery to operate.</p>
</li>
<li>
<p>Notice the body background color? By default, all ArozOS WebApps have transparent background. If the body css is not set as white (or any solid color), your WebApp floating windows will be transparent.</p>
</li>
<li>
<p>ao_module_agirun is the entry point for all AGI scripts that is called via ArozOS WebApps. The function paramter is defined as follows.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nx">ao_module_agirun</span><span class="p">(</span><span class="nx">scriptpath</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="nx">failedcallback</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">,</span> <span class="nx">timeout</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span></span></code></pre></div></li>
</ul>
<p>Lets try to add a backend to it!</p>
<h3 id="backend-agi-script">Backend agi Script</h3>
<p>To add a backend script to handle the agi request, create a folder named &ldquo;backend&rdquo; and name it &ldquo;helloworld.js&rdquo;. Now, your folder structure should look like this.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">.
</span></span><span class="line"><span class="cl">â””â”€â”€ web/
</span></span><span class="line"><span class="cl">    â””â”€â”€ MyWebapp/
</span></span><span class="line"><span class="cl">        â”œâ”€â”€ init.agi
</span></span><span class="line"><span class="cl">        â”œâ”€â”€ index.html
</span></span><span class="line"><span class="cl">        â”œâ”€â”€ img/
</span></span><span class="line"><span class="cl">        â”‚   â”œâ”€â”€ icon.png
</span></span><span class="line"><span class="cl">        â”‚   â””â”€â”€ desktop_icon.png
</span></span><span class="line"><span class="cl">        â””â”€â”€ backend/
</span></span><span class="line"><span class="cl">            â””â”€â”€ helloworld.js
</span></span></code></pre></div><p>Open and edit the helloworld.js file as follows.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="c1">//Send Hello World as response
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">if</span> <span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="nx">NAME</span><span class="p">)</span> <span class="o">!=</span> <span class="s2">&#34;undefined&#34;</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sendResp</span><span class="p">(</span><span class="s2">&#34;Hello World! Welcome &#34;</span> <span class="o">+</span> <span class="nx">NAME</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sendResp</span><span class="p">(</span><span class="s2">&#34;Hello there!&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>The code in the backend basically do the following things.</p>
<ol>
<li>
<p>Check if the input NAME is available.</p>
</li>
<li>
<p>If yes, return hello world with the user&rsquo;s name</p>
</li>
<li>
<p>If no, return hello there!</p>
</li>
</ol>
<p>In the front-end, we call this script as follows.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nx">ao_module_agirun</span><span class="p">(</span><span class="s2">&#34;MyWebapp/backend/helloworld.js&#34;</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">NAME</span><span class="o">:</span> <span class="s2">&#34;Toby&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">resp</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">alert</span><span class="p">(</span><span class="nx">resp</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span><span class="kd">function</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">alert</span><span class="p">(</span><span class="s2">&#34;Oops. Something went wrong!&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></div><p>In the above example, a variable <code>NAME: &quot;Toby&quot; </code>is passed to the backend. In such case, the backend will response with <code>Hello World! Welcome Toby</code> and result is shown via alert() function.</p>
<h3 id="now-you-know-the-basics-on-how-webapps-with-backend-works-in-arozos-">Now, you know the basics on how WebApps with backend works in ArozOS! ğŸ‰ğŸ‰ğŸ‰</h3>
<p>Lets continue to the next chapter to see how agi provides you basically all features you need to write a script to control your own web desktop system.</p>

</div>
</div>

        </div>
      </div>
    </div>
    
  </div>

  <div class="sub-footer">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="sub-footer-inner">
          
            
<div class="social">
    
        <a href="https://github.com/tobychui/arozos" target="blank"><img height="20" width="20" src="/ArozOS-Developers/images/social/github.svg" title="Github" alt="Github" /></a>
    
        <a href="https://t.me/ArOZBeta" target="blank"><img height="20" width="20" src="/ArozOS-Developers/images/social/telegram.svg" title="Telegram" alt="Telegram" /></a>
    
</div>

          
          
            <div class="copyright">CopyRight <a href="https://arozos.com">ArozOS</a> Project | Licensed under GPLv3</div>
          
        </div>
      </div>
    </div>
  </div>
</div>


  

  
  

  
  <script type="text/javascript" src="/ArozOS-Developers/js/scripts.min.302a6fc365d5139fb98cf60bdb8f715d96257ea189161d36c190ccfa8182e569.js"></script>
  

  
  
  
    
  


</body>

</html>
