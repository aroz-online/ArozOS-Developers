<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîπ ao_module utilities - Developers | ArozOS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="icon" href="https://aroz-online.github.io/ArozOS-Developers/favicon.png">

  
  
  <link rel="stylesheet" href="/ArozOS-Developers/css/style.min.2abe4f9deee2e3e8ec440009003f7bb21c5c60b7915a1cf8ec38e682289bee57.css">
  

  

</head>

<body class='page page-default-single'>
  <div id="main-menu-mobile" class="main-menu-mobile">
  <ul>
    
    
    <li class="menu-item-home">
      <a href="/ArozOS-Developers/">
        <span>Home</span>
      </a>
    </li>
    
    <li class="menu-item-docs">
      <a href="/ArozOS-Developers/docs/">
        <span>Docs</span>
      </a>
    </li>
    
    <li class="menu-item-source">
      <a href="https://github.com/tobychui/arozos">
        <span>Source</span>
      </a>
    </li>
    
  </ul>
</div>
  <div class="wrapper">
    <div class='header'>
  <div class="container">
    <div class="logo">
      <a href="https://aroz-online.github.io/ArozOS-Developers/"><img width="70" height="70" alt="Logo" src="/ArozOS-Developers/images/logo.svg" /></a>
    </div>
    <div class="logo-mobile">
      <a href="https://aroz-online.github.io/ArozOS-Developers/"><img  width="70" height="70" alt="Logo" src="/ArozOS-Developers/images/logo-mobile.svg" /></a>
    </div>
    <div id="main-menu" class="main-menu">
  <ul>
    
    
    <li class="menu-item-home">
      <a href="/ArozOS-Developers/">
        <span>Home</span>
      </a>
    </li>
    
    <li class="menu-item-docs">
      <a href="/ArozOS-Developers/docs/">
        <span>Docs</span>
      </a>
    </li>
    
    <li class="menu-item-source">
      <a href="https://github.com/tobychui/arozos">
        <span>Source</span>
      </a>
    </li>
    
  </ul>
</div>
    <button id="toggle-main-menu-mobile" class="hamburger hamburger--slider" type="button">
  <span class="hamburger-box">
    <span class="hamburger-inner"></span>
  </span>
</button>
  </div>
</div>


    
    
    
    
    
    

    
    <div class="container pt-2 pt-md-6 pb-3 pb-md-6">
      <div class="row">
        <div class="col-12 col-md-3 mb-3">
          <div class="sidebar">
            
<div class="docs-menu">
  <h4>Docs</h4>
  <ul>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/runtimes/">Introduction to agi</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/setup_dev_env/">Create New WebApp</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/init-agi/">Start Script (init.agi)</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/agi_resp/">Request &amp; Response</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/frontend/">Front-end Development</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/frontend_window-control/">üîπ Float-Windows API</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/frontend_files/">üîπ Select, Pass or Upload Files</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/frontend_media/">üîπ Requesting Media Stream</a>
    </li>
    
    <li class="active ">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/frontend_aomodule-utils/">üîπ ao_module utilities</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend/">Backend Development</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_std/">üî∏ system</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_user/">üî∏ user</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_serverless/">üî∏ serverless</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_filelib/">üî∏ filelib</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_appdata/">üî∏ appdata</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_imagelib/">üî∏ imagelib</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_http/">üî∏ http</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_websocket/">üî∏ websocket</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_iot/">üî∏ iot</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_share/">üî∏ share</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/advance/">Advance Usage</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/advance_tgbot/">‚óºÔ∏è Telegram Bot (Serverless)</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/advance_user-space-exec/">‚óºÔ∏è User Space Exec (Serverless)</a>
    </li>
    
  </ul>
</div>

          </div>
        </div>
        <div class="col-12 col-md-9">
          
<h1 class="title">üîπ ao_module utilities</h1>
<div class="content ">
  <p>ao_module provide a list of utilities function which you can use to make developing WebApps easier.</p>
<h2 id="usage">Usage</h2>
<p>To use the utilities functions, your fist need to import the ao_module wrapper as follows.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/javascript&#34;</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;../script/jquery.min.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/javascript&#34;</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;../script/ao_module.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></div><p>And call them with the static class name <code>ao_module_utils</code>. For example,</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">newUUID</span> <span class="o">=</span> <span class="nx">ao_module_utils</span><span class="p">.</span><span class="nx">getRandomUID</span><span class="p">();</span> <span class="c1">//Return a random UUID from timestamp
</span></span></span></code></pre></div><h2 id="objects-encoding">Objects Encoding</h2>
<h3 id="objecttoattrobject">objectToAttr(object)</h3>
<p>Convert objects into a DOM attribute safe string</p>
<h3 id="attrtoobjectattr">attrToObject(attr)</h3>
<p>Convert the DOM attribute string back to a JavaScript object</p>
<h3 id="stringtoblobtext-mimetypetextplain">stringToBlob(text, mimetype=&ldquo;text/plain&rdquo;)</h3>
<p>Convert string to blob object</p>
<h3 id="blobtofileblob-filename-mimetypetextplain">blobToFile(blob, filename, mimetype=&ldquo;text/plain&rdquo;)</h3>
<p>Convert blob to File object.</p>
<h2 id="file-utilities">File Utilities</h2>
<h3 id="readfilefromfileobjectfileobject-successcallback-failedcallbackundefined">readFileFromFileObject(fileObject, successCallback, failedCallback=undefined)</h3>
<p>Read file object as text. Success callback will return the content of the file as string, while failed callback will return the reader error DOMException.</p>
<h3 id="getdropfileinfodropevent">getDropFileInfo(dropEvent)</h3>
<p>Get the drop file properties <code>{filepath: file_virtual_path, filename: file_name}</code> from file drop events from File Manager. Return <code>null</code> if this is not a drop event from File Manager</p>
<h3 id="geticonfromextext">getIconFromExt(ext)</h3>
<p>Return Semantic UI supported icon class name (without the icon class) as string from given file extension. For example</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">fileExt</span> <span class="o">=</span> <span class="s2">&#34;pdf&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">iconElement</span> <span class="o">=</span> <span class="sb">`&lt;i class=&#34;</span><span class="si">${</span><span class="nx">ao_module_utils</span><span class="p">.</span><span class="nx">getIconFromExt</span><span class="p">(</span><span class="nx">fileExt</span><span class="p">)</span><span class="si">}</span><span class="sb"> icon&#34;&gt;&lt;/i&gt;`</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//The icon element class will be &#34;file pdf outline icon&#34;
</span></span></span></code></pre></div><h3 id="formatbytesbytes-decimalplace2">formatBytes(bytes, decimalPlace=2)</h3>
<p>Convert and rounds bytes into KB, MB, GB, TB up to YB (probably not need this anytime soon)</p>
<h2 id="others">Others</h2>
<h3 id="getrandomuid">getRandomUID()</h3>
<p>Get a random UUID base on current timestamp</p>
<h3 id="durationconverterseconds">durationConverter(seconds)</h3>
<p>Convert duration in seconds to Days / Hours / Minutes / Seconds</p>
<h3 id="timeconverterunix_timestamp">timeConverter(unix_timestamp);</h3>
<p>Get human readable timestamp from unix timestamp</p>
<h3 id="getwebsocketendpoint">getWebSocketEndpoint()</h3>
<p>Construct server websocket endpoint root from current client accessing URL. The URL is constrcuted on the front-end so it will use the hostname from where the client is connecting into the system as the root url for websocket connection. Here is an example if the user is connecting in via HTTP from LAN.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ws://192.168.1.100:8080
</span></span></code></pre></div><p>And here is another example user is connecting into your server via HTTPS domain</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">wss://example.com
</span></span></code></pre></div><p>You can add your scripts relative path to it and create a websocket connection. Here is an example.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">wsurl</span> <span class="o">=</span> <span class="nx">ao_module_utils</span><span class="p">.</span><span class="nx">getWebSocketEndpoint</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&#34;/MyModule/backend/connect.agi&#34;</span><span class="p">;</span>
</span></span></code></pre></div>
</div>
</div>

        </div>
      </div>
    </div>
    
  </div>

  <div class="sub-footer">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="sub-footer-inner">
          
            
<div class="social">
    
        <a href="https://github.com/tobychui/arozos" target="blank"><img height="20" width="20" src="/ArozOS-Developers/images/social/github.svg" title="Github" alt="Github" /></a>
    
        <a href="https://t.me/ArOZBeta" target="blank"><img height="20" width="20" src="/ArozOS-Developers/images/social/telegram.svg" title="Telegram" alt="Telegram" /></a>
    
</div>

          
          
            <div class="copyright">CopyRight <a href="https://arozos.com">ArozOS</a> Project | Licensed under GPLv3</div>
          
        </div>
      </div>
    </div>
  </div>
</div>


  

  
  

  
  <script type="text/javascript" src="/ArozOS-Developers/js/scripts.min.302a6fc365d5139fb98cf60bdb8f715d96257ea189161d36c190ccfa8182e569.js"></script>
  

  
  
  
    
  


</body>

</html>
