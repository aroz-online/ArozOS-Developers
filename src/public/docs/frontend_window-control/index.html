<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîπ Float-Windows API - Developers | ArozOS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="icon" href="https://aroz-online.github.io/ArozOS-Developers/favicon.png">

  
  
  <link rel="stylesheet" href="/ArozOS-Developers/css/style.min.2abe4f9deee2e3e8ec440009003f7bb21c5c60b7915a1cf8ec38e682289bee57.css">
  

  

</head>

<body class='page page-default-single'>
  <div id="main-menu-mobile" class="main-menu-mobile">
  <ul>
    
    
    <li class="menu-item-home">
      <a href="/ArozOS-Developers/">
        <span>Home</span>
      </a>
    </li>
    
    <li class="menu-item-docs">
      <a href="/ArozOS-Developers/docs/">
        <span>Docs</span>
      </a>
    </li>
    
    <li class="menu-item-source">
      <a href="https://github.com/tobychui/arozos">
        <span>Source</span>
      </a>
    </li>
    
  </ul>
</div>
  <div class="wrapper">
    <div class='header'>
  <div class="container">
    <div class="logo">
      <a href="https://aroz-online.github.io/ArozOS-Developers/"><img width="70" height="70" alt="Logo" src="/ArozOS-Developers/images/logo.svg" /></a>
    </div>
    <div class="logo-mobile">
      <a href="https://aroz-online.github.io/ArozOS-Developers/"><img  width="70" height="70" alt="Logo" src="/ArozOS-Developers/images/logo-mobile.svg" /></a>
    </div>
    <div id="main-menu" class="main-menu">
  <ul>
    
    
    <li class="menu-item-home">
      <a href="/ArozOS-Developers/">
        <span>Home</span>
      </a>
    </li>
    
    <li class="menu-item-docs">
      <a href="/ArozOS-Developers/docs/">
        <span>Docs</span>
      </a>
    </li>
    
    <li class="menu-item-source">
      <a href="https://github.com/tobychui/arozos">
        <span>Source</span>
      </a>
    </li>
    
  </ul>
</div>
    <button id="toggle-main-menu-mobile" class="hamburger hamburger--slider" type="button">
  <span class="hamburger-box">
    <span class="hamburger-inner"></span>
  </span>
</button>
  </div>
</div>


    
    
    
    
    
    

    
    <div class="container pt-2 pt-md-6 pb-3 pb-md-6">
      <div class="row">
        <div class="col-12 col-md-3 mb-3">
          <div class="sidebar">
            
<div class="docs-menu">
  <h4>Docs</h4>
  <ul>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/runtimes/">Introduction to agi</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/setup_dev_env/">Create New WebApp</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/init-agi/">Start Script (init.agi)</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/agi_resp/">Request &amp; Response</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/frontend/">Front-end Development</a>
    </li>
    
    <li class="active ">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/frontend_window-control/">üîπ Float-Windows API</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/frontend_files/">üîπ Select, Pass or Upload Files</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/frontend_media/">üîπ Requesting Media Stream</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend/">Backend Development</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_std/">üî∏ system</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_user/">üî∏ user</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_serverless/">üî∏ serverless</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_filelib/">üî∏ filelib</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_appdata/">üî∏ appdata</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_imagelib/">üî∏ imagelib</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_http/">üî∏ http</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_websocket/">üî∏ websocket</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_iot/">üî∏ iot</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/backend_share/">üî∏ share</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/advance/">Advance Usage</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/advance_tgbot/">‚óºÔ∏è Telegram Bot (Serverless)</a>
    </li>
    
    <li class="">
      <a href="https://aroz-online.github.io/ArozOS-Developers/docs/advance_user-space-exec/">‚óºÔ∏è User Space Exec (Serverless)</a>
    </li>
    
  </ul>
</div>

          </div>
        </div>
        <div class="col-12 col-md-9">
          
<h1 class="title">üîπ Float-Windows API</h1>
<div class="content ">
  <h2 id="requirements">Requirements</h2>
<p>Float Windows (fw) are the draggable windows on the ArozOS web desktops that display the contents of WebApps. Float Windows properties can be controlled by the app front-end script using the <code>ao_module.js</code> api wrapper in the <code>web/script/</code> folder. To use it, import the ao_module wrapper from your webapp html files.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/javascript&#34;</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;../script/jquery.min.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/javascript&#34;</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;../script/ao_module.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></div><p><em>Note that <strong>jquery must be imported before ao_module.js  AND ao_module must be imported with relative path to current script</strong> to make sure all the ao_module functions are usable.</em></p>
<hr>
<h2 id="float-window-apis">Float Window APIs</h2>
<h3 id="global-variables">Global Variables</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="nx">ao_module_virtualDesktop</span> <span class="c1">//boolean, true when the current app is running in web desktop mode
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="nx">ao_module_windowID</span> <span class="c1">//Window ID of the current app
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">ao_module_parentID</span> <span class="c1">//Parent window ID if this app window is created by another webapp
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">ao_module_callback</span> <span class="c1">//Callback function name (string) in parent
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">ao_module_ime</span> <span class="c1">//Set if this is an IME window, reserve for IME catergory WebApps only
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="nx">ao_root</span> <span class="c1">//Relative path to ArozOS web root, e.g. ../ 
</span></span></span></code></pre></div><hr>
<h3 id="windows-operations">Windows Operations</h3>
<h4 id="-ao_module_newfwlaunchconfig">üîπ ao_module_newfw(launchConfig)</h4>
<p>newfw create a new float windows with given launch configs.</p>
<p>Most basic usage: (With auto assign UID, size and location)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">ao_module_newfw</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;url&#34;</span><span class="o">:</span> <span class="s2">&#34;Dummy/index.html&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;title&#34;</span><span class="o">:</span> <span class="s2">&#34;Dummy Module&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;appicon&#34;</span><span class="o">:</span> <span class="s2">&#34;Dummy/img/icon.png&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></div><p>Example usage that involve all configs.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">ao_module_newfw</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;url&#34;</span><span class="o">:</span> <span class="s2">&#34;Dummy/index.html&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;uid&#34;</span><span class="o">:</span> <span class="s2">&#34;CustomUUID&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;width&#34;</span><span class="o">:</span> <span class="mi">1024</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;height&#34;</span><span class="o">:</span> <span class="mi">768</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;appicon&#34;</span><span class="o">:</span> <span class="s2">&#34;Dummy/img/icon.png&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;title&#34;</span><span class="o">:</span> <span class="s2">&#34;Dummy Module&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;left&#34;</span><span class="o">:</span> <span class="mi">100</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;top&#34;</span><span class="o">:</span> <span class="mi">100</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;background-color&#34;</span><span class="o">:</span> <span class="s2">&#34;#fcfcfc&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;parent&#34;</span><span class="o">:</span> <span class="nx">ao_module_windowID</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;callback&#34;</span><span class="o">:</span> <span class="s2">&#34;childCallbackHandler&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></div><h5 id="note-about-parent-and-callback-values">Note about parent and callback values</h5>
<p>The <code>parent</code> id must be set if <code>callback</code> is set.</p>
<p><code>callback</code> is the name (string) of a global function in the parent float window that allow calling from its child. This won&rsquo;t work if the url is called from another origin that do not allow CORS access.</p>
<h4 id="-ao_module_hasparentcallback">üîπ ao_module_hasParentCallback()</h4>
<p>hasParentCallback return true or false depends on this windows has a set parent callback and its parent is still alive (the float window DOM object still exists)</p>
<h4 id="-ao_module_parentcallbackdata">üîπ ao_module_parentCallback(data=&quot;&quot;)</h4>
<p>parentCallback execute the parent callback from the child and return data to the parent float window. The data must be string. Use <code>JSON.stringify</code> if object data is needed to pass to the parent window.</p>
<hr>
<h3 id="windows-properties">Windows Properties</h3>
<p>These are some global scope ao_module wrapper function where developer can call in their WebApp JavaScript sections to change the float window properties on the web desktop interface. When the API was called in non web-desktop mode, nothing will happens.</p>
<h4 id="-ao_module_setfixedwindowsize">üîπ ao_module_setFixedWindowSize()</h4>
<p>setFixedWindowSize set the float window to non-resizable window type. The maximize (and minimize) button will be hidden if this function is called when the webapp startup.</p>
<h4 id="-ao_module_setresizablewindowsize">üîπ ao_module_setResizableWindowSize()</h4>
<p>setResizableWindowSize set the float window to resizable window type. The maximize (and minimize) button will be shown. This is the default type of float window if <code>setFixedWindowSize()</code> was not called.</p>
<h4 id="-ao_module_setwindowsizewidth-height">üîπ ao_module_setWindowSize(width, height)</h4>
<p>setWindowSize force update the current float window to the target new size</p>
<h4 id="-ao_module_setwindowtitlenewtitle">üîπ ao_module_setWindowTitle(newTitle)</h4>
<p>setWindowTitle update the current float window to new title. Under non web-desktop mode, this function call update the <code>document.title</code> instead.</p>
<h4 id="-ao_module_makesingleinstance">üîπ ao_module_makeSingleInstance()</h4>
<p>makeSingleInstance is used to force only one instance of an WebApp is open at the same time. This function will check if there are any windows with the same path. If yes, overwrite the other window&rsquo;s hash content with the current window and close the current float window.</p>
<p>If no another instance is found, this function return false and do nothing.</p>
<h4 id="-ao_module_getinstancebypathmatchingpath">üîπ ao_module_getInstanceByPath(matchingPath)</h4>
<p>getInstanceByPath get the first instance of float windows running in the current web desktop with the same path. Here is an example of usage.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">targetOpeningInstance</span> <span class="o">=</span> <span class="nx">ao_module_getInstanceByPath</span><span class="p">(</span><span class="s2">&#34;NotepadA/index.html&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//Another float window (DOM objects) that also open to the same path
</span></span></span></code></pre></div><p>This function return null if nothing is found.</p>
<h4 id="-ao_module_close">üîπ ao_module_close()</h4>
<p>close function close the current float window. However, you can also overwrite this function with your own checking logic and call to the underlaying api of <code>ao_module_closeHandler()</code>. Here is an example</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">//In your WebApp front-end javascript, overwrite the ao_module_close function
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">ao_module_close</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">checkDocumentSaved</span><span class="p">()){</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//Call to the underlaying fw closing API
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">ao_module_closeHandler</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//Do something else and block closing action
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">alert</span><span class="p">(</span><span class="s2">&#34;Please save the document before closing&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h4 id="-ao_module_closehandler">üîπ ao_module_closeHandler()</h4>
<p>closeHandler is the underlaying API for <code>ao_module_close()</code>. Only use for overwriting the default <code>ao_module_close()</code> function.</p>
<h4 id="-ao_module_focus">üîπ ao_module_focus()</h4>
<p>focus will bring the current float window to top.</p>
<h4 id="-ao_module_settopmost">üîπ ao_module_setTopMost()</h4>
<p>setTopMost will bring the current float window to top and attach it in front of all other float windows.</p>
<h4 id="-ao_module_unsettopmost">üîπ ao_module_unsetTopMost()</h4>
<p>unsetTopMost will remove the current float window from the top-most layer and bring it back to the normal float windows layer.</p>

</div>
</div>

        </div>
      </div>
    </div>
    
  </div>

  <div class="sub-footer">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="sub-footer-inner">
          
            
<div class="social">
    
        <a href="https://github.com/tobychui/arozos" target="blank"><img height="20" width="20" src="/ArozOS-Developers/images/social/github.svg" title="Github" alt="Github" /></a>
    
        <a href="https://t.me/ArOZBeta" target="blank"><img height="20" width="20" src="/ArozOS-Developers/images/social/telegram.svg" title="Telegram" alt="Telegram" /></a>
    
</div>

          
          
            <div class="copyright">CopyRight <a href="https://arozos.com">ArozOS</a> Project | Licensed under GPLv3</div>
          
        </div>
      </div>
    </div>
  </div>
</div>


  

  
  

  
  <script type="text/javascript" src="/ArozOS-Developers/js/scripts.min.302a6fc365d5139fb98cf60bdb8f715d96257ea189161d36c190ccfa8182e569.js"></script>
  

  
  
  
    
  


</body>

</html>
